---
status: "proposed"
date: "2025-10-06"
decision-makers: Fernano Paris <fernando.paris@swirldslabs.com>, Mariusz Jasuwienas <mariusz.jasuwienas@arianelabs.com>, Michal Walczak <michal.walczak@arianelabs.com>, Piotr Swierzy <piotr.swierzy@arianelabs.com>
consulted:
informed:
---

# ADR 001: A repository with Hedera System Contracts 

## Context and problem statement

Currently, Hederaâ€™s system contracts are stored in the repository [Ariane-Labs/hedera-smart-contracts](https://github.com/Ariane-Labs/hedera-smart-contracts).
However, this repository also contains various examples, unrelated tools, and miscellaneous resources. As a result, potential users lack a clear understanding of the core functionality and how to effectively use it.

To improve clarity and usability, a dedicated package - similar in structure and purpose to [OpenZeppelin Contracts](https://github.com/OpenZeppelin/openzeppelin-contracts) - should be created.
This package should primarily include:

* Implementations of the smart contracts deployed on Hedera networks that interface with system precompiles.
* Clear documentation and examples demonstrating how users can test interactions with these precompiles.
* Installation and usage guides for both Foundry and Hardhat environments.

### Decision Drivers

- We need to publish an NPM package that provides the essential code developers need to test and build their own smart contracts that interact with the Hedera ecosystem.
- Latest major releases of Foundry, Hardhat should be supported.

## Considered options

* **Continue using the existing repository**
* **Create a new dedicated repository for Hedera System Contracts**

### Continue using the existing repository

Extract the system contract implementations into a new, independent repository (e.g., hedera-system-contracts), similar in structure to OpenZeppelin.

### Consequences

Positive:
 - No migration or restructuring effort required.
 - Existing references and integrations remain unchanged.

Negative:
 - Core functionality remains mixed with unrelated content.
 - Difficult for users to identify the production-ready contracts.
 - Poor separation of concerns and limited scalability for future system contracts.

### Create a new dedicated repository for Hedera System Contracts

Extract the system contract implementations into a new, independent repository (e.g., `hiero/system-contracts`).

Contracts selected for migration to the new repository:

```bash
contracts/hip-719-proxy/HRC719TokenProxy.sol
contracts/system-contracts/hedera-account-service/HederaAccountService.sol
contracts/system-contracts/hedera-account-service/IHederaAccountService.sol
contracts/system-contracts/hedera-account-service/IHRC632.sol
contracts/system-contracts/hedera-account-service/IHRC904AccountFacade.sol
contracts/system-contracts/hedera-account-service/IHRC906.sol
contracts/system-contracts/hedera-account-service/IHRC906AccountFacade.sol
contracts/system-contracts/hedera-schedule-service/HederaScheduleService.sol
contracts/system-contracts/hedera-schedule-service/IHederaScheduleService.sol
contracts/system-contracts/hedera-schedule-service/IHRC755.sol
contracts/system-contracts/hedera-schedule-service/IHRC755ScheduleFacade.sol
contracts/system-contracts/hedera-schedule-service/IHRC756.sol
contracts/system-contracts/hedera-token-service/ExpiryHelper.sol
contracts/system-contracts/hedera-token-service/FeeHelper.sol
contracts/system-contracts/hedera-token-service/HederaTokenService.sol
contracts/system-contracts/hedera-token-service/IHederaTokenService.sol
contracts/system-contracts/hedera-token-service/IHRC719.sol
contracts/system-contracts/hedera-token-service/IHRC904TokenFacade.sol
contracts/system-contracts/hedera-token-service/IHTSStructs.sol
contracts/system-contracts/hedera-token-service/KeyHelper.sol
contracts/system-contracts/hedera-token-service/examples
contracts/system-contracts/hedera-token-service/safe-hts
contracts/system-contracts/hedera-token-service-v2/FeeHelper.sol
contracts/system-contracts/hedera-token-service-v2/HederaResponseCodes.sol
contracts/system-contracts/hedera-token-service-v2/HederaTokenService.sol
contracts/system-contracts/hedera-token-service-v2/IHederaTokenService.sol
contracts/system-contracts/hedera-token-service-v2/KeyHelper.sol
contracts/system-contracts/hedera-token-service-v2/examples/HIP1028Contract.sol
contracts/system-contracts/native/EcrecoverCaller.sol
contracts/system-contracts/native/EthNativePrecompileCaller.sol
contracts/system-contracts/pseudo-random-number-generator/IPrngSystemContract.sol
contracts/system-contracts/pseudo-random-number-generator/PrngSystemContract.sol
contracts/system-contracts/HederaResponseCodes.sol
```

The new repository will follow a standardized and developer-friendly layout to improve clarity, modularity, and maintainability.

### Directory structure overview:

- `contracts/interfaces/{Service}.sol` - Interfaces of system contracts (precompile - facing).
- `contracts/{Service}/interfaces/{Struct}.sol` - Structs used in the services interface.
- `contracts/interfaces/{Service}.sol` - Interfaces of non-system contracts, such as accounts or tokens (i.e., functionalities exposed through facades).
- `contracts/{Service}/{Service}.sol`  - Main implementation of the system contract.
- `contracts/{Service}/*.sol` - Other production components related to the service.
- `contracts/mocks/*` - Mock contracts for testing purposes.
- `contracts/utils/*` - General-purpose helpers and builders (e.g., request encoders)
- `test/*` - All example contracts should be moved here too and treated as tests

Proposed file allocation:

1. Hedera Account Service

| Current File                                                                  | New Location                                                     |
| ----------------------------------------------------------------------------- |------------------------------------------------------------------|
| `contracts/system-contracts/hedera-account-service/HederaAccountService.sol`  | `contracts/account-service/HederaAccountService.sol`             |
| `contracts/system-contracts/hedera-account-service/IHederaAccountService.sol` | `contracts/account-service/interfaces/IHederaAccountService.sol` |
| `contracts/system-contracts/hedera-account-service/IHRC632.sol`               | `contracts/account-service/interfaces/IHRC632.sol`               |
| `contracts/system-contracts/hedera-account-service/IHRC904AccountFacade.sol`  | `contracts/interfaces/IHRC904AccountFacade.sol`                  |
| `contracts/system-contracts/hedera-account-service/IHRC906.sol`               | `contracts/account-service/interfaces/IHRC906.sol`               |
| `contracts/system-contracts/hedera-account-service/IHRC906AccountFacade.sol`  | `contracts/interfaces/IHRC906AccountFacade.sol`                  |


2. Hedera Schedule Service:

| Current File                                                                    | New Location                                                      |
| ------------------------------------------------------------------------------- |-------------------------------------------------------------------|
| `contracts/system-contracts/hedera-schedule-service/HederaScheduleService.sol`  | `contracts/schedule-service/HederaScheduleService.sol`            |
| `contracts/system-contracts/hedera-schedule-service/IHederaScheduleService.sol` | `contracts/chedule-service/interfaces/IHederaScheduleService.sol` |
| `contracts/system-contracts/hedera-schedule-service/IHRC755.sol`                | `contracts/chedule-service/interfaces/IHRC755.sol`                |
| `contracts/system-contracts/hedera-schedule-service/IHRC755ScheduleFacade.sol`  | `contracts/interfaces/IHRC755ScheduleFacade.sol`                  |
| `contracts/system-contracts/hedera-schedule-service/IHRC756.sol`                | `contracts/chedule-service/interfaces/IHRC756.sol`                |

3. Hedera Token Service:

| Current File                                                              | New Location                                                 |
|---------------------------------------------------------------------------|--------------------------------------------------------------|
| `contracts/system-contracts/hedera-token-service/HederaTokenService.sol`  | `contracts/token-service/HederaTokenService.sol`             |
| `contracts/system-contracts/hedera-token-service/IHederaTokenService.sol` | `contracts/token-service/interfaces/IHederaTokenService.sol` |
| `contracts/system-contracts/hedera-token-service/IHRC719.sol`             | `contracts/token-service/interfaces/IHRC719.sol`             |
| `contracts/system-contracts/hedera-token-service/IHRC904TokenFacade.sol`  | `contracts/interfaces/IHRC904TokenFacade.sol`                |
| `contracts/system-contracts/hedera-token-service/IHTSStructs.sol`         | `contracts/token-service/interfaces/IHTSStructs.sol`         |
| `contracts/system-contracts/hedera-token-service/FeeHelper.sol`           | `contracts/token-service/utils/FeeHelper.sol`                |
| `contracts/system-contracts/hedera-token-service/KeyHelper.sol`           | `contracts/token-service/utils/KeyHelper.sol`                |
| `contracts/system-contracts/hedera-token-service/ExpiryHelper.sol`        | `contracts/token-service/utils/ExpiryHelper.sol`             |
| `contracts/system-contracts/hedera-token-service/examples`                | Moved to tests                                               |
| `contracts/system-contracts/hedera-token-service/safe-hts`                | `contracts/token-service/utils/safe-hts`                     |
| `contracts/hip-719-proxy/HRC719TokenProxy.sol`                            | `contracts/hip-719-proxy/HRC719TokenProxy.sol`               |

4. Hedera Token Service v2

| Current File                                                                      | New Location                                                      |
| --------------------------------------------------------------------------------- |-------------------------------------------------------------------|
| `contracts/system-contracts/hedera-token-service-v2/HederaTokenService.sol`       | `contracts/token-service-v2/HederaTokenService.sol`               |
| `contracts/system-contracts/hedera-token-service-v2/IHederaTokenService.sol`      | `contracts/token-service-v2/interfaces/IHederaTokenServiceV2.sol` |
| `contracts/system-contracts/hedera-token-service-v2/FeeHelper.sol`                | `contracts/token-service-v2/utils/FeeHelper.sol`                  |
| `contracts/system-contracts/hedera-token-service-v2/KeyHelper.sol`                | `contracts/token-service-v2/utils/KeyHelper.sol`                  |
| `contracts/system-contracts/hedera-token-service-v2/HederaResponseCodes.sol`      | `contracts/token-service-v2/utils/HederaResponseCodes.sol`        |
| `contracts/system-contracts/hedera-token-service-v2/examples/HIP1028Contract.sol` | Moved to tests                                                    |

5. Native Contracts

Moved to tests

6. Pseudo-Random number generator

| Current File                                                                        | New Location                                   |
| ----------------------------------------------------------------------------------- | ---------------------------------------------- |
| `contracts/system-contracts/pseudo-random-number-generator/IPrngSystemContract.sol` | `contracts/interfaces/IPrngSystemContract.sol` |
| `contracts/system-contracts/pseudo-random-number-generator/PrngSystemContract.sol`  | `contracts/prng/PrngSystemContract.sol`        |

7. General purpose utilities

| Current File                                         | New Location                                         |
| ---------------------------------------------------- |------------------------------------------------------|
| `contracts/system-contracts/HederaResponseCodes.sol` | `contracts/common/interfaces`                        |

> Additionally, some of the HIP-based interfaces can likely be integrated into the main interface that represents the behavior of the specific contract address.

> Artifacts and abis will not be included in the version control.

#### Evaluate and migrate tests

The current implementation already includes a tests directory. These existing tests should be evaluated, refactored if necessary, and migrated to the new repository. Both Hardhat and Foundry frameworks should be supported to ensure compatibility across common developer environments.

Example usages and integration scenarios may also be included here to demonstrate how to interact with the system contracts and validate expected behavior.

If the tests depend on OpenZeppelin interfaces, the OpenZeppelin smart contract code should be included as a dependency, not copied directly into the repository.


#### Review and complete documentation for all Smart Contracts

Each smart contract in the new repository should include comprehensive documentation. This includes:

- A high-level description of the contractâ€™s purpose and role within the Hedera ecosystem.
- If the contract communicates with a precompile, include a brief explanation of what that precompile is and what functionality it provides.
- Explanations for key methods, parameters, and return values.
- Any relevant usage examples or developer notes.

Existing documentation should be reviewed for accuracy and completeness. Missing or outdated information should be added or updated.

The README should provide simple, developer-focused instructions on how to install and use the tools with popular frameworks (Hardhat and Foundry) to build smart contracts that interact with the Hedera System Contracts.

#### Make the new repository environment-agnostic

The library should not require any specific configuration to run or function correctly. If environment are needed (for example, for GitHub Actions or deployment pipelines), they should be defined in a .env.example file to clearly indicate their purpose and expected values.

#### Export a npm library for the System Contracts

Proposed location: `@hashgraph/constracts`

#### CI/CD

Set up GitHub Actions to automate the build, test, and deployment workflows for the new repository. The CI/CD pipeline should ensure consistent code quality, successful compilation, and proper packaging of the library before publication.

### Consequences

Positive:
 - Clear ownership and purpose focused solely on Hedera System Contracts.
 - Easy for developers to find, use, and contribute.
 - Simplifies versioning, packaging, and publishing to package managers.
 - Enables concise documentation and guided examples.

Negative:
 - Requires migration effort.

## Decision Outcome

We propose creating a new dedicated repository for Hedera System Contracts.