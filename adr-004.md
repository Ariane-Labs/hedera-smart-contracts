---
status: "proposed"
date: "2025-10-06"
decision-makers: Fernando Paris <fernando.paris@swirldslabs.com>, Mariusz Jasuwienas <mariusz.jasuwienas@arianelabs.com>, Michal Walczak <michal.walczak@arianelabs.com>, Piotr Swierzy <piotr.swierzy@arianelabs.com>
consulted:
informed:
---

# ADR 004: Testing Framework Selection for System Contracts Repository

## Context and Problem Statement

The Hedera System Contracts will require testing infrastructure (in a separate repository per ADR-003). We need to choose which smart contract testing framework(s) we want to use.

The two most popular testing frameworks in the Ethereum ecosystem are:
- **Hardhat**: JavaScript/TypeScript-based, widely adopted, extensive plugin ecosystem
- **Foundry**: Solidity-based, fast execution, growing adoption

We need to decide whether to support one framework or both.

> We have some tests in Foundry (located in tests/foundry), but they are mainly provided as examples — similar to the Yul tests. For now, they are not treated as a primary testing tool. This is why, in this ADR, they are treated as non-existent.

## Decision Drivers

- Community preferences
- Ease of implementation

## Considered Options

1. **Support only Hardhat** (recommended)
2. Support only Foundry
3. Support both Hardhat and Foundry

## Option 1: Support only Hardhat

Support Hardhat as the single testing framework for the System Contracts repository.

### Positive

- Hardhat is the most widely adopted testing framework in the Ethereum ecosystem.
- Tests are already written in Hardhat, so little work is required.

### Negative

- JavaScript-based tests are slower than Foundry's Solidity tests
- Developers who prefer Foundry may have friction

## Option 2: Support only Foundry

Support Foundry as the single testing framework for the System Contracts repository.

## Consequences

### Positive

- JavaScript-based tests are slower than Foundry’s Solidity tests, and some developers might prefer the latter.

### Negative
- Would require implementation. We currently have example usages of the smart contract written in Solidity, but they would need to be rewritten as Foundry test files.

### Option 3: Support both Hardhat and Foundry

Support both frameworks in parallel, allowing users to choose their preference.

## Consequences

### Positive

- Both popular testing frameworks would be supported.

### Negative

- Would require implementation. We currently have example usages of the smart contract written in Solidity, but they would need to be rewritten as Foundry test files.

## Decision outcome

Since Hardhat tests are already available, it will be sufficient to move them to the new repository.
They should be reviewed and evaluated, and updated if necessary - but this should not require significant effort.
